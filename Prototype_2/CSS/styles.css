:root{--bg:#F7F1E8;--card:#fff;--text:#1f2430;--muted:#606776;--border:#e6e6ea;--brand:#6E56EF;--brand-2:#2C2F3A;--ring:rgba(110,86,239,.35);}
*{box-sizing:border-box}body{margin:0;font-family:Inter,sans-serif;background:var(--bg);color:var(--text)}
.app{display:grid;grid-template-columns:260px 1fr 340px;gap:28px;padding:20px;max-width:1400px;margin:auto}
.sidebar{background:var(--brand-2);color:#fff;border-radius:16px;padding:16px;display:flex;flex-direction:column;gap:16px}
.brand{display:flex;align-items:center;gap:10px;padding:10px 12px;background:rgba(255,255,255,.04);border-radius:12px}
.brand-logo{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,#4f46e5,#06b6d4);display:grid;place-items:center;font-weight:700}
.filter{background:rgba(255,255,255,.05);border-radius:12px;padding:10px}
.menu-btn{background:transparent;border:0;color:#fff;width:100%;text-align:left;padding:10px;border-radius:10px;font-weight:600}
.menu-btn.active,.menu-btn:hover{background:rgba(255,255,255,.08)}
.game-list{display:flex;flex-direction:column;gap:8px}
.game-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;cursor:pointer}
.game-item:hover{background:rgba(255,255,255,.06)}
.game-avatar{width:28px;height:28px;border-radius:50%;background:#2b2f3a}
.badge-dot{margin-left:auto;background:#ffd166;border-radius:20px;padding:2px 7px;font-weight:700;font-size:11px;color:#000}
.create-channel{background:#111319;color:#fff;border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:12px;cursor:pointer}
.main{min-width:0}
.topbar{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px;display:flex;align-items:center;gap:12px;margin-bottom:16px}
.search{flex:1;display:flex;align-items:center;gap:10px;background:#fff;border:1px solid var(--border);border-radius:12px;padding:8px 12px}
.search input{border:0;outline:0;width:100%;font-size:14px}
.icon-btn{width:38px;height:38px;border:1px solid var(--border);border-radius:12px;background:#fff;display:grid;place-items:center;cursor:pointer}
.primary-btn{background:var(--brand);color:#fff;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer;box-shadow:0 4px 12px var(--ring)}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;margin-bottom:18px}
.post-head{display:flex;align-items:center;gap:12px;padding:14px}
.avatar{width:42px;height:42px;border-radius:50%;overflow:hidden}
.avatar img{width:100%;height:100%;object-fit:cover}
.hero{display:block;width:100%;aspect-ratio:16/9;border-radius:14px;overflow:hidden;margin:10px 0}
.hero img{width:100%;height:100%;object-fit:cover}
.card-body{padding:0 18px 18px}
.post-title{font-size:20px;margin:8px 0}
.post-meta{color:var(--muted);font-size:14px}
.actions{display:flex;gap:10px;margin-top:12px}
.chip{padding:8px 12px;border-radius:999px;background:#f5f3ff;border:1px solid var(--border);cursor:pointer}
.chip.alt{background:#e8fff7}
.comments{margin-top:14px;display:flex;flex-direction:column;gap:12px}
.comment{display:flex;gap:10px}
.bubble{background:#fafafa;border:1px solid var(--border);padding:12px;border-radius:12px;flex:1}
.badge-text{font-size:12px;color:#888}
.rail{display:flex;flex-direction:column;gap:16px}
.panel{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px}
.user-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:12px}
.user-item:hover{background:#f8f9ff}
.panel-head{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.link-btn{border:1px solid var(--border);background:#fff;padding:8px 10px;border-radius:10px;font-size:13px;cursor:pointer}
.community{display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px}
.community:hover{background:#f8f9ff}
.facepile{display:flex}
.facepile img{width:24px;height:24px;border-radius:50%;border:2px solid #fff;margin-left:-6px}
.count{margin-left:auto;background:#EDEBFE;border:1px solid #e1dfff;padding:3px 8px;border-radius:999px;font-weight:700;font-size:12px}
.arrow{margin-left:8px;width:28px;height:28px;border:1px solid var(--border);border-radius:8px;display:grid;place-items:center;background:#fff}
@media(max-width:1200px){.app{grid-template-columns:240px 1fr}.rail{display:none}}
@media(max-width:900px){.app{grid-template-columns:1fr;gap:16px;padding:12px}.sidebar{position:fixed;inset:0 auto 0 0;width:82%;max-width:300px;transform:translateX(-100%);transition:.3s;z-index:60}.sidebar.open{transform:translateX(0)}.sidebar-overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;z-index:50}.sidebar-overlay.show{display:block}}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:100}
.modal.show{display:flex}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:saturate(120%) blur(2px)}
.modal-card{position:relative;width:min(1100px,92vw);max-height:88vh;background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 24px 60px rgba(0,0,0,.25);display:flex;flex-direction:column;overflow:hidden}
.modal-top{display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid var(--border);background:#fafafa}
.modal-title{font-weight:700}
.modal-actions{margin-left:auto;display:flex;gap:8px}
.btn{border:1px solid var(--border);background:#fff;border-radius:10px;padding:8px 12px;font-weight:600;cursor:pointer}
.board-wrap{padding:14px}
#boardCanvas{position:relative;overflow:auto;border:1px solid var(--border);border-radius:12px;background:#0b0d14}
#boardImage{display:block;max-width:100%;height:auto}
#pinLayer{position:absolute;inset:0;pointer-events:auto}
.pin{position:absolute;width:22px;height:22px;border-radius:999px;background:#6E56EF;transform:translate(-50%,-100%);display:grid;place-items:center;color:#fff;font-size:12px;font-weight:800;cursor:grab;user-select:none}
.pin:active{cursor:grabbing}
.pin .label{position:absolute;top:-8px;left:16px;transform:translateY(-100%);background:#111827;color:#fff;padding:6px 8px;border-radius:8px;max-width:240px;font-size:12px;line-height:1.25;display:none}
.pin.show .label{display:block}
.hint{font-size:12px;color:#6b7280;margin-top:10px}
.dark .modal-card{background:#151822;border-color:#232634}
.dark #boardCanvas{border-color:#232634;background:#0b0f16}
.dark .btn{background:#151822;border-color:#232634;color:#e6e8ef}
.hidden{display:none}
.form{padding:14px}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.field label{display:block;font-size:12px;color:#6b7280;margin-bottom:6px}
.field input,.field textarea{width:100%;border:1px solid var(--border);border-radius:10px;padding:10px;background:#fff;font:inherit}
.field.full{grid-column:1/-1}
.form-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:8px}
.comment-form{display:flex;gap:8px;margin-top:10px}
.comment-form input{flex:1;border:1px solid var(--border);border-radius:10px;padding:10px}
.comment-form button{border:1px solid var(--border);background:#fff;border-radius:10px;padding:10px 12px;font-weight:600;cursor:pointer}
.dark .field input,.dark .field textarea,.dark .comment-form input,.dark .comment-form button{background:#151822;border-color:#232634;color:#e6e8ef}
.draw-toolbar{display:flex;gap:8px;align-items:center;margin:0 0 10px}
.draw-toolbar [data-active="1"]{outline:2px solid var(--brand)}
#boardCanvas{position:relative;overflow:auto;border:1px solid var(--border);border-radius:12px;background:#0b0d14}
#boardImage{display:block;max-width:100%;height:auto}
#drawCanvas{position:absolute;left:0;top:0;pointer-events:auto}
#pinLayer{position:absolute;inset:0;pointer-events:auto}
.dark .draw-toolbar [data-active="1"]{outline:2px solid #8b7dff}


